<!DOCTYPE html>
<html> 
<head> 
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" /> 
  <title>Google Maps Multiple Markers</title> 
  <script src="http://maps.google.com/maps/api/js?sensor=false" 
          type="text/javascript"></script>
</head> 
<body onload="initialize()">
<script type="text/javascript">
// Note that using Google Gears requires loading the Javascript
// at http://code.google.com/apis/gears/gears_init.js

var siberia = new google.maps.LatLng(60, 105);
var newyork = new google.maps.LatLng(40.69847032728747, -73.9514422416687); 
var usa = new google.maps.LatLng(44.58, -95.46); //middle of the US w 50 states     

var browserSupportFlag =  new Boolean();
var map;
function initialize() {
    var myOptions = {
    zoom: 4,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions)
  map.setCenter(usa);   
}

function getMyLocation() {
    var initialLocation= newyork;

    // Try W3C Geolocation (Preferred)
    if(navigator.geolocation) {
        browserSupportFlag = true;
        navigator.geolocation.getCurrentPosition(function(position) {
        initialLocation = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
        map.setCenter(initialLocation);
        map.setZoom(10);
        addMarker(initialLocation);
    }, function() {
    handleNoGeolocation(browserSupportFlag);
    });
    // Try Google Gears Geolocation
    } else if (google.gears) {
        browserSupportFlag = true;
        var geo = google.gears.factory.create('beta.geolocation');
        geo.getCurrentPosition(function(position) {
        initialLocation = new google.maps.LatLng(position.latitude,position.longitude);
        map.setCenter(initialLocation);
        addMarker(initialLocation);
    }, function() {
        handleNoGeoLocation(browserSupportFlag);
    });
    // Browser doesn't support Geolocation
    } else {
        browserSupportFlag = false;
        handleNoGeolocation(browserSupportFlag);
    }

    function handleNoGeolocation(errorFlag) {
        if (errorFlag == true) {
            alert("Geolocation service failed.");
            initialLocation = newyork;
        } else {
             alert("Your browser doesn't support geolocation. We've placed you in Siberia.");
             initialLocation = siberia;
        }
        map.setCenter(usa);
    }

}

function addMarker(location) {
    marker = new google.maps.Marker({
    position: location,
    map: map, 
    title: "Hello World!"
    });
    //markersArray.push(marker);
}
</script>
<h1>Map</h1>
<div id="map_canvas" style="width: 500px; height: 500px"></div>
<input type="button" onclick="getMyLocation()" value="Search"/>
</body>â€‹
markit(<?php $thispoi['poi_lat']?>,<?php $thispoi['poi_lat']?>);
script.src = "https://maps.googleapis.com/maps/api/js?key=" + myKey + "&sensor=false&callback=initialize";
           script.src = "https://maps.googleapis.com/maps/api/js?sensor=false";
           
           
                   var lat = document.getElementById('poi_lat').value;
        document.getElementById('poi_lat').value= latcor;
           
////////////////////////////////////////////////////////////////////
$(function() {
	var dragops = {
			connectWith: "#relatedlist",
			revert:true,
			};
	var dropops = {
			update: function(event, ui) {
				var poi_lat = ui.item.attr("data-lat");
				var poi_lon = ui.item.attr("data-lon");
				addMarker(poi_lat,poi_lon);
				
				}
			};
			
	$( "#thingslist" ).sortable(dragops);
	$( "#eatlist" ).sortable(dragops);
	$( "#staylist" ).sortable(dragops);
    $( "#relatedlist" ).sortable(dropops);
    
    $("#staysearch").keyup(function(){
        var text = $(this).val();
        $('#staylist li').each(function(){
             if($(this).text().toUpperCase().indexOf(text.toUpperCase()) == -1)
                 $(this).hide();
             else
                $(this).show();});     
    });
    $("#eatsearch").keyup(function(){
        var text = $(this).val();
        $('#eatlist li').each(function(){
            if($(this).text().toUpperCase().indexOf(text.toUpperCase()) == -1)
                $(this).hide();
             else
                $(this).show();});     
    });
    $("#thingssearch").keyup(function(){
        var text = $(this).val();
        $('#thingslist li').each(function(){
            if($(this).text().toUpperCase().indexOf(text.toUpperCase()) == -1)
                $(this).hide();
             else
                $(this).show();});     
    });
    $('#staylist li').hover(function () {
        var id = $(this).attr('id');
        var a = 'http://myapp/poi/generalinfo/'+id;
        $.ajax({
      	  url: a,
        	success: function(data){
//                var divtooltip = document.getElementById("tooltop");
//                 divtooltip.innerHTML = data;
          	},
      	    async: false,
      	});
    });
 });
           
           
           
           
           
